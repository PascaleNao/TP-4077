{"ast":null,"code":"var _jsxFileName = \"/home/viviane/TP JIOMEKONG/carnet-frontend/carnet-medical-app/src/components/medecin/PatientSummary.jsx\",\n  _s = $RefreshSig$();\n// src/components/medecin/PatientSummary.jsx\nimport React, { useState, useEffect } from 'react';\nimport { fetchDoctorPatientDossier } from '../../api/medicalApi';\nimport AddConsultationForm from './AddConsultationForm';\nimport DossierDetails from '../patient/DossierDetails'; // Réutilisation du composant Patient\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PatientSummary = ({\n  patientId,\n  patientBaseInfo,\n  medecinId,\n  onBackToSearch\n}) => {\n  _s();\n  const [dossier, setDossier] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [showAddForm, setShowAddForm] = useState(false);\n\n  // Fonction de chargement du dossier\n  const loadDossier = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const res = await fetchDoctorPatientDossier(patientId);\n      setDossier(res.data);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Échec de l'extraction du dossier.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    loadDossier();\n  }, [patientId]); // Rechargement si l'ID patient change\n\n  // Gestion du succès de l'ajout (pour rafraîchir la liste des consultations)\n  const handleConsultationSuccess = () => {\n    setShowAddForm(false);\n    // Rafraîchir les données du dossier\n    loadDossier();\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: 'center'\n    },\n    children: \"Synth\\xE8se du Dossier en cours de chargement...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 25\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"alert alert-error\",\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 23\n  }, this);\n  if (!dossier) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"alert\",\n    children: \"Dossier non disponible.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 26\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        marginBottom: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: () => setShowAddForm(true),\n        children: \"\\u2795 Ajouter une Nouvelle Consultation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-secondary\",\n        onClick: onBackToSearch,\n        children: \"\\u2190 Nouvelle Recherche\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this), showAddForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      style: {\n        border: '1px solid var(--color-secondary)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Nouveau Bilan M\\xE9dical\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(AddConsultationForm, {\n        patientId: patientId,\n        medecinId: medecinId,\n        onSuccess: handleConsultationSuccess,\n        onCancel: () => setShowAddForm(false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(DossierDetails, {\n      dossier: dossier,\n      onDownload: () => alert(\"Le téléchargement doit être implémenté via l'API.\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 9\n  }, this);\n};\n_s(PatientSummary, \"/k3pcG65/kNRv6sp0GZchUuKj14=\");\n_c = PatientSummary;\nexport default PatientSummary;\nvar _c;\n$RefreshReg$(_c, \"PatientSummary\");","map":{"version":3,"names":["React","useState","useEffect","fetchDoctorPatientDossier","AddConsultationForm","DossierDetails","jsxDEV","_jsxDEV","PatientSummary","patientId","patientBaseInfo","medecinId","onBackToSearch","_s","dossier","setDossier","loading","setLoading","error","setError","showAddForm","setShowAddForm","loadDossier","res","data","err","_err$response","_err$response$data","response","message","handleConsultationSuccess","style","textAlign","children","fileName","_jsxFileName","lineNumber","columnNumber","className","display","justifyContent","marginBottom","onClick","border","onSuccess","onCancel","onDownload","alert","_c","$RefreshReg$"],"sources":["/home/viviane/TP JIOMEKONG/carnet-frontend/carnet-medical-app/src/components/medecin/PatientSummary.jsx"],"sourcesContent":["// src/components/medecin/PatientSummary.jsx\nimport React, { useState, useEffect } from 'react';\nimport { fetchDoctorPatientDossier } from '../../api/medicalApi';\nimport AddConsultationForm from './AddConsultationForm';\nimport DossierDetails from '../patient/DossierDetails'; // Réutilisation du composant Patient\n\nconst PatientSummary = ({ patientId, patientBaseInfo, medecinId, onBackToSearch }) => {\n    const [dossier, setDossier] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n    const [showAddForm, setShowAddForm] = useState(false);\n\n    // Fonction de chargement du dossier\n    const loadDossier = async () => {\n        setLoading(true);\n        setError(null);\n        try {\n            const res = await fetchDoctorPatientDossier(patientId);\n            setDossier(res.data);\n        } catch (err) {\n            setError(err.response?.data?.message || \"Échec de l'extraction du dossier.\");\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        loadDossier();\n    }, [patientId]); // Rechargement si l'ID patient change\n\n    // Gestion du succès de l'ajout (pour rafraîchir la liste des consultations)\n    const handleConsultationSuccess = () => {\n        setShowAddForm(false);\n        // Rafraîchir les données du dossier\n        loadDossier();\n    };\n\n    if (loading) return <div style={{ textAlign: 'center' }}>Synthèse du Dossier en cours de chargement...</div>;\n    if (error) return <div className=\"alert alert-error\">{error}</div>;\n    if (!dossier) return <div className=\"alert\">Dossier non disponible.</div>;\n\n\n    return (\n        <div>\n            {/* Boutons d'action */}\n            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '20px' }}>\n                <button\n                    className=\"btn btn-primary\"\n                    onClick={() => setShowAddForm(true)}\n                >\n                    ➕ Ajouter une Nouvelle Consultation\n                </button>\n                <button\n                    className=\"btn btn-secondary\"\n                    onClick={onBackToSearch}\n                >\n                    &larr; Nouvelle Recherche\n                </button>\n            </div>\n\n            {/* Affichage du formulaire d'ajout */}\n            {showAddForm && (\n                <div className=\"card\" style={{ border: '1px solid var(--color-secondary)' }}>\n                    <h2>Nouveau Bilan Médical</h2>\n                    <AddConsultationForm\n                        patientId={patientId}\n                        medecinId={medecinId}\n                        onSuccess={handleConsultationSuccess}\n                        onCancel={() => setShowAddForm(false)}\n                    />\n                </div>\n            )}\n\n            {/* Affichage du dossier (réutilisation du composant Patient) */}\n            <DossierDetails dossier={dossier} onDownload={() => alert(\"Le téléchargement doit être implémenté via l'API.\")} />\n        </div>\n    );\n};\n\nexport default PatientSummary;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}